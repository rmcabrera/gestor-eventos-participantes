apiVersion: v1
kind: ConfigMap
metadata:
  name: eventos-init-scripts
  namespace: gestion-ep-dev
data:
  init_schema_eventos.sql: |
    ALTER SESSION SET CONTAINER = XEPDB1;

    CREATE USER ms_eventos IDENTIFIED BY eventos123;
    GRANT CONNECT, RESOURCE TO ms_eventos;
    ALTER USER ms_eventos QUOTA UNLIMITED ON USERS;

    CREATE TABLE ms_eventos.evento (
        id           NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        nombre       VARCHAR2(100) NOT NULL,
        descripcion  VARCHAR2(255),
        fecha_inicio DATE NOT NULL,
        fecha_fin    DATE,
        lugar        VARCHAR2(150),
        cupo_maximo  NUMBER,
        creado_en    TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    );

    COMMIT;
